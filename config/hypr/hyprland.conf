# ============================================================
# ‚ö° CYBER-TUNG HYPRLAND CONFIG - FULL OPTIMIZED
# ============================================================

# --- BI·∫æN ---
$mainMod = SUPER
$scripts = ~/scripts

# --- M√ÄN H√åNH (Fix chu·∫©n 1:1) ---
monitor=,preferred,auto,1

# --- T·ª∞ ƒê·ªòNG CH·∫†Y ---
exec-once = nm-applet --indicator &
exec-once = fcitx5 -d &
exec-once = mako &
exec-once = /usr/lib/polkit-kde-authentication-agent-1 &
exec-once = swww-daemon &
exec-once = wal -R &
exec-once = sleep 0.5 && swww img "$(cat ~/.cache/wal/wal)" --transition-type simple
exec-once = sleep 1 && waybar &
exec-once = tlp start
exec-once = gvfs-mount &
exec-once = /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1

# --- NH·∫¨P LI·ªÜU (M·∫•y c√°i √¥ng ch·ªânh v·ªÅ chu·ªôt/ph√≠m) ---
input {
    kb_layout = us
    follow_mouse = 1
    sensitivity = 0 # -1.0 - 1.0, 0 means no modification.
    touchpad {
        natural_scroll = 1
        tap-to-click = 1
    }
}

# --- GIAO DI·ªÜN (Gaps chu·∫©n cho ƒë·∫πp) ---
general {
    gaps_in = 5
    gaps_out = 10
    border_size = 2
    col.active_border = rgba(33ccffee) rgba(00ff99ee) 45deg
    col.inactive_border = rgba(595959aa)
    layout = dwindle
}

# --- TRANG TR√ç ---

decoration {
    rounding = 12

    # ƒê·ªô trong su·ªët (D√πng c√°i n√†y l√† chu·∫©n nh·∫•t)
    active_opacity = 0.95       # Khi ch·∫°m v√†o: v·∫´n h∆°i trong m·ªôt ch√∫t cho ƒë·∫πp (95%)
    inactive_opacity = 0.65     # Khi kh√¥ng ch·∫°m: trong su·ªët h·∫≥n nh√¨n xuy√™n th·∫•u (65%)

    blur {
        enabled = true
        size = 8                # Gi·∫£m size xu·ªëng c·ª±c th·∫•p ƒë·ªÉ n√≥ trong v·∫Øt nh∆∞ k√≠nh
        passes = 2              # √çt pass th√¥i ƒë·ªÉ nh√¨n xuy√™n th·∫•u r√µ h∆°n
        
        # PH·∫¶N QUAN TR·ªåNG ƒê·ªÇ N√ì S√ÅNG:
        brightness = 1.2        # TƒÉng l√™n 1.2 ƒë·ªÉ c·ª≠a s·ªï s√°ng b·ª´ng l√™n
        contrast = 1.1          # TƒÉng nh·∫π t∆∞∆°ng ph·∫£n cho s·∫Øc n√©t
        vibrancy = 0.3          # L√†m m√†u s·∫Øc r·ª±c r·ª° h∆°n qua l·ªõp k√≠nh
        
        new_optimizations = true
        ignore_opacity = true
    }

    shadow {
        enabled = true
        range = 20              # ƒê·ªï b√≥ng r·ªông ra cho n√≥ c√≥ chi·ªÅu s√¢u
        render_power = 4
        color = rgba(0,0,0,0.4)
    }
}

# --- C·∫§U H√åNH H·ªÜ TH·ªêNG CHI TI·∫æT (MISC C·ª¶A √îNG ƒê√ÇY) ---
misc {
    disable_hyprland_logo = true
    disable_splash_rendering = true
    force_default_wallpaper = 0
    mouse_move_enables_dpms = true
    vfr = true
    vrr = 0
    animate_manual_resizes = true
    mouse_move_focuses_monitor = true
    enable_swallow = true
    swallow_regex = ^(kitty)$
}
# --- C·∫§U H√åNH HI·ªÜU ·ª®NG M∆Ø·ª¢T M√Ä ---

animations {
    enabled = true
    # ƒê∆∞·ªùng cong l∆∞·ªõt c·ª±c nh·∫π
    bezier = slowCurve, 0.3, 1, 0.3, 1

    # HI·ªÜU ·ª®NG TRONG SU·ªêT (Fade) - ƒê√£ tƒÉng th·ªùi gian
    animation = fade, 1, 20, slowCurve          
    
    # KHI CHU·ªòT V√ÄO: V·∫´n ƒë·ªÉ h∆°i nhanh m·ªôt ch√∫t (s·ªë 5) ƒë·ªÉ kh√¥ng b·ªã c·∫£m gi√°c m√°y lag
    animation = fadeIn, 1, 5, slowCurve
    
    # KHI CHU·ªòT RA: TƒÉng v·ªçt l√™n 40! C√°i n√†y s·∫Ω l√†m n√≥ m·ªù ƒëi c·ª±c k·ª≥ t·ª´ t·ª´
    animation = fadeOut, 1, 40, slowCurve
    
    # Khi ƒë·ªïi gi·ªØa c√°c c·ª≠a s·ªï - TƒÉng l√™n cho n√≥ m∆∞·ª£t
    animation = fadeSwitch, 1, 25, slowCurve
}


# --- PH√çM T·∫ÆT ---
# --- üöÄ APPS C∆† B·∫¢N ---
bind = $mainMod, Q, exec, kitty
bind = $mainMod, E, exec, dolphin
bind = $mainMod, G, exec, google-chrome-stable
bind = $mainMod, SPACE, exec, rofi -show drun
bind = $mainMod, V, togglefloating,

# --- üõ†Ô∏è QU·∫¢N L√ù H·ªÜ TH·ªêNG ---
bind = $mainMod, C, killactive,
bind = $mainMod, M, exit,               # Tho√°t Hyprland
bind = $mainMod, L, exec, wlogout       # Menu T·∫Øt m√°y/Reboot
bind = $mainMod, P, exec, hyprlock      # Kh√≥a m√†n h√¨nh (Lock)
bind = $mainMod, B, exec, killall -SIGUSR1 waybar # ·∫®n/Hi·ªán thanh Waybar

# --- üì∏ CH·ª§P ·∫¢NH M√ÄN H√åNH ---
# Ch·ª•p v√πng ch·ªçn (C√°i √¥ng hay d√πng)
bind = $mainMod SHIFT, S, exec, grimblast --notify save area ~/Pictures/Screenshots/$(date +'%Y-%m-%d_%H-%M-%S').png
# Ch·ª•p to√†n m√†n h√¨nh
bind = , Print, exec, grimblast --notify save screen ~/Pictures/Screenshots/$(date +'%Y-%m-%d_%H-%M-%S').png

# --- üñ•Ô∏è QU·∫¢N L√ù C·ª¨A S·ªî & WORKSPACES ---
bind = $mainMod, F, fullscreen, 0
bind = $mainMod, Tab, workspace, previous

# Di chuy·ªÉn ti√™u ƒëi·ªÉm (Focus)
bind = $mainMod, left, movefocus, l
bind = $mainMod, right, movefocus, r
bind = $mainMod, up, movefocus, u
bind = $mainMod, down, movefocus, d

# Thay ƒë·ªïi k√≠ch th∆∞·ªõc c·ª≠a s·ªï (Resize) - Nh·∫•n Win + R r·ªìi d√πng m≈©i t√™n
bind = $mainMod, R, submap, resize
submap = resize
binde = , right, resizeactive, 10 0
binde = , left, resizeactive, -10 0
binde = , up, resizeactive, 0 -10
binde = , down, resizeactive, 0 10
bind = , escape, submap, reset 
submap = reset

# --- üî¢ WORKSPACES (1-6) ---
bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5
bind = $mainMod, 6, workspace, 6

# ƒê·∫©y App sang Workspace kh√°c
bind = $mainMod SHIFT, 1, movetoworkspace, 1
bind = $mainMod SHIFT, 2, movetoworkspace, 2
bind = $mainMod SHIFT, 3, movetoworkspace, 3
bind = $mainMod SHIFT, 4, movetoworkspace, 4

# --- üîä PH√çM LAPTOP (√Çm thanh/ƒê·ªô s√°ng) ---
bindle = , XF86AudioRaiseVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%+
bindle = , XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
bindle = , XF86MonBrightnessUp, exec, brightnessctl set 5%+
bindle = , XF86MonBrightnessDown, exec, brightnessctl set 5%-
bindl = , XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bindl = , XF86AudioMicMute, exec, wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle

# --- üñ±Ô∏è CHU·ªòT ---
bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow

# --- üåà TI·ªÜN √çCH KH√ÅC ---
bind = $mainMod, W, exec, ~/scripts/wallpaper_engine.sh
bind = $mainMod, F1, exec, ~/CyberDotfiles/scripts/keyhints.sh
