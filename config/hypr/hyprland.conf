# ============================================================
# ‚ö° CYBER-TUNG HYPRLAND CONFIG - FULL OPTIMIZED
# ============================================================

# --- BI·∫æN ---
$mainMod = SUPER
$scripts = ~/scripts

# --- M√ÄN H√åNH (Fix chu·∫©n 1:1) ---
monitor=,preferred,auto,1


# --- T·ª∞ ƒê·ªòNG CH·∫†Y ---
exec-once = nm-applet --indicator &
exec-once = fcitx5 -d &
exec-once = mako &
exec-once = swww-daemon &
exec-once = waybar        # B·ªè sleep, b·ªè &, ƒë·ªÉ Hyprland t·ª± qu·∫£n l√Ω n√≥
exec-once = wal -R &
exec-once = /usr/lib/polkit-kde-authentication-agent-1 &

# Wallpaper x·ª≠ l√Ω ri√™ng cho m∆∞·ª£t
exec-once = sleep 0.5 && swww img "$(cat ~/.cache/wal/wal)" --transition-type simple

# C√°c d·ªãch v·ª• h·ªá th·ªëng
exec-once = tlp start
exec-once = gvfs-mount &
exec-once = ~/CyberDotfiles/scripts/cyberguard.sh &

# --- NH·∫¨P LI·ªÜU (M·∫•y c√°i √¥ng ch·ªânh v·ªÅ chu·ªôt/ph√≠m) ---
input {
    kb_layout = us
    follow_mouse = 1
    sensitivity = 0 # -1.0 - 1.0, 0 means no modification.
    touchpad {
        natural_scroll = 1
        tap-to-click = 1
    }
}

# --- GIAO DI·ªÜN (Gaps chu·∫©n cho ƒë·∫πp) ---
general {
    gaps_in = 5
    gaps_out = 10
    border_size = 2
    col.active_border = rgba(33ccffee) rgba(00ff99ee) 45deg
    col.inactive_border = rgba(595959aa)
    layout = dwindle
}

# --- TRANG TR√ç ---

decoration {
    rounding = 12

    # ƒê·ªô trong su·ªët: S√°ng s·ªßa v√† s·∫Øc n√©t
    active_opacity = 0.98
    inactive_opacity = 0.60

    blur {
        enabled = true
        size = 10
        passes = 3
        
        # T·ªêI ∆ØU ƒê·ªò S√ÅNG:
        brightness = 1.5        # TƒÉng l√™n 1.5 cho s√°ng r·ª±c r·ª°
        contrast = 1.2
        vibrancy = 0.6          # M√†u s·∫Øc qua l·ªõp k√≠nh t∆∞∆°i t·∫Øn h∆°n
        vibrancy_darkness = 0.0
        
        new_optimizations = true
        ignore_opacity = true
    }

    shadow {
        enabled = true
        range = 20
        render_power = 3
        color = rgba(0, 0, 0, 0.15) # B√≥ng c·ª±c nh·∫π ƒë·ªÉ t√¥n n·ªÅn s√°ng
        # ƒê√£ x√≥a d√≤ng color_off g√¢y l·ªói
    }
}

# --- C·∫§U H√åNH H·ªÜ TH·ªêNG CHI TI·∫æT (MISC C·ª¶A √îNG ƒê√ÇY) ---
misc {
    disable_hyprland_logo = true
    disable_splash_rendering = true
    force_default_wallpaper = 0
    mouse_move_enables_dpms = true
    vfr = true
    vrr = 0
    animate_manual_resizes = true
    mouse_move_focuses_monitor = true
    enable_swallow = true
    swallow_regex = ^(kitty)$
}
# --- C·∫§U H√åNH HI·ªÜU ·ª®NG M∆Ø·ª¢T M√Ä ---

animations {
    enabled = true
    
    # ƒê∆∞·ªùng cong nhanh m·∫°nh (Snappy)
    bezier = shot, 0.2, 1, 0.2, 1

    # T·ªëc ƒë·ªô: Ch·ªânh v·ªÅ m·ª©c 5-7 l√† "v√†ng", c·ª±c nhanh v√† m∆∞·ª£t
    animation = windows, 1, 5, shot, slide
    animation = windowsOut, 1, 5, shot, slide
    animation = fade, 1, 5, shot
    animation = fadeIn, 1, 4, shot
    animation = fadeOut, 1, 6, shot
    animation = workspaces, 1, 5, shot, slide
}

# --- PH√çM T·∫ÆT ---
# --- üöÄ APPS C∆† B·∫¢N ---
bind = $mainMod, Q, exec, kitty
bind = $mainMod, E, exec, dolphin
bind = $mainMod, G, exec, google-chrome-stable
bind = $mainMod, SPACE, exec, rofi -show drun
bind = $mainMod, V, togglefloating,

# --- üõ†Ô∏è QU·∫¢N L√ù H·ªÜ TH·ªêNG ---
bind = $mainMod, C, killactive,
bind = $mainMod, M, exit,               # Tho√°t Hyprland
bind = $mainMod, L, exec, wlogout       # Menu T·∫Øt m√°y/Reboot
bind = $mainMod, P, exec, hyprlock      # Kh√≥a m√†n h√¨nh (Lock)
bind = $mainMod, B, exec, killall -SIGUSR1 waybar

# --- üì∏ CH·ª§P ·∫¢NH M√ÄN H√åNH ---
# Ch·ª•p v√πng ch·ªçn (C√°i √¥ng hay d√πng)
bind = $mainMod SHIFT, S, exec, grimblast --notify save area ~/Pictures/Screenshots/$(date +'%Y-%m-%d_%H-%M-%S').png
# Ch·ª•p to√†n m√†n h√¨nh
bind = , Print, exec, grimblast --notify save screen ~/Pictures/Screenshots/$(date +'%Y-%m-%d_%H-%M-%S').png

# --- üñ•Ô∏è QU·∫¢N L√ù C·ª¨A S·ªî & WORKSPACES ---
bind = $mainMod, F, fullscreen, 0
bind = $mainMod, Tab, workspace, previous

# Di chuy·ªÉn ti√™u ƒëi·ªÉm (Focus)
bind = $mainMod, left, movefocus, l
bind = $mainMod, right, movefocus, r
bind = $mainMod, up, movefocus, u
bind = $mainMod, down, movefocus, d

# Thay ƒë·ªïi k√≠ch th∆∞·ªõc c·ª≠a s·ªï (Resize) - Nh·∫•n Win + R r·ªìi d√πng m≈©i t√™n
bind = $mainMod, R, submap, resize
submap = resize
binde = , right, resizeactive, 10 0
binde = , left, resizeactive, -10 0
binde = , up, resizeactive, 0 -10
binde = , down, resizeactive, 0 10
bind = , escape, submap, reset 
submap = reset

# --- üî¢ WORKSPACES (1-6) ---
bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5
bind = $mainMod, 6, workspace, 6

# ƒê·∫©y App sang Workspace kh√°c
bind = $mainMod SHIFT, 1, movetoworkspace, 1
bind = $mainMod SHIFT, 2, movetoworkspace, 2
bind = $mainMod SHIFT, 3, movetoworkspace, 3
bind = $mainMod SHIFT, 4, movetoworkspace, 4

# --- üîä PH√çM LAPTOP (√Çm thanh/ƒê·ªô s√°ng) ---
bindle = , XF86AudioRaiseVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%+
bindle = , XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
bindle = , XF86MonBrightnessUp, exec, brightnessctl set 5%+
bindle = , XF86MonBrightnessDown, exec, brightnessctl set 5%-
bindl = , XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bindl = , XF86AudioMicMute, exec, wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle

# --- üñ±Ô∏è CHU·ªòT ---
bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow

# --- üåà TI·ªÜN √çCH KH√ÅC ---
bind = $mainMod, W, exec, ~/scripts/wallpaper_engine.sh
bind = $mainMod, F1, exec, ~/CyberDotfiles/scripts/keyhints.sh
